# ë©˜í† ë§ í”¼ë“œë°± ê¸°ë°˜ ê°œì„ ì‚¬í•­

> **ì‘ì„±ì¼**: 2025-10-14
> **ëª©ì **: ë©˜í† ë§ í”¼ë“œë°±ì„ ë°˜ì˜í•œ ìµœì¢… ê°œì„ ì‚¬í•­ ì •ë¦¬
> **ìš°ì„ ìˆœìœ„**: Critical (ê²½ì§„ëŒ€íšŒ ë§ˆê° 1ì¼ ì „)

---

## ğŸ“‹ ëª©ì°¨
1. [ì‹¤í—˜ í˜„í™© ë¶„ì„](#1-ì‹¤í—˜-í˜„í™©-ë¶„ì„)
2. [ë©˜í† ë§ í”¼ë“œë°± ìš”ì•½](#2-ë©˜í† ë§-í”¼ë“œë°±-ìš”ì•½)
3. [ê°œì„ ì‚¬í•­ ë° ì¡°ì¹˜](#3-ê°œì„ ì‚¬í•­-ë°-ì¡°ì¹˜)
4. [ìµœì¢… ì „ëµ ìˆ˜ë¦½](#4-ìµœì¢…-ì „ëµ-ìˆ˜ë¦½)
5. [ì‹¤í–‰ ê³„íš](#5-ì‹¤í–‰-ê³„íš)

---

## 1. ì‹¤í—˜ í˜„í™© ë¶„ì„

### 1.1 ìµœê·¼ ì‹¤í—˜ ê²°ê³¼ (20251013_161056_test_strategy3_triple)

#### í•™ìŠµ ì„±ê³µ ëª¨ë¸

| ëª¨ë¸ | ROUGE-1 | ROUGE-2 | ROUGE-L | ìƒíƒœ |
|------|---------|---------|---------|------|
| **kobart** | 0.4048 | 0.2480 | 0.3952 | âœ… ì„±ê³µ |
| **llama-3.2-korean-3b** | 0.1096 | 0.0735 | 0.1096 | âœ… ì„±ê³µ |
| **qwen3-4b** | 0.1450 | 0.0980 | 0.1450 | âœ… ì„±ê³µ |

#### ì£¼ìš” ì„±ê³¼
- âœ… 3ê°œ ëª¨ë¸ ëª¨ë‘ í•™ìŠµ ì™„ë£Œ (ì´ì „ BFloat16 ë¬¸ì œ í•´ê²°)
- âœ… KoBARTê°€ ì••ë„ì  ì„±ëŠ¥ (ROUGE-1: 0.4048)
- âœ… Full Pipeline ì •ìƒ ì‘ë™ (ì•™ìƒë¸”, ì¶”ë¡ , ì œì¶œ)

#### ê°œì„  í•„ìš” ì‚¬í•­
- âš ï¸ LLM ëª¨ë¸ë“¤(Llama, Qwen)ì˜ ë‚®ì€ ì„±ëŠ¥ (ROUGE-1: 0.1096~0.1450)
- âš ï¸ ë°ì´í„° ì¦ê°• ë¹„ìœ¨ ë¶€ì¡± (í˜„ì¬ êµ¬í˜„ í™•ì¸ í•„ìš”)
- âš ï¸ ì „ì²˜ë¦¬/í›„ì²˜ë¦¬ ìµœì í™” í•„ìš”

```mermaid
graph TB
    A[ì‹¤í—˜ ê²°ê³¼] --> B[KoBART<br/>ROUGE-1: 0.4048]
    A --> C[Llama<br/>ROUGE-1: 0.1096]
    A --> D[Qwen<br/>ROUGE-1: 0.1450]

    B --> E[âœ… ìš°ìˆ˜<br/>ë‹¨ì¼ ëª¨ë¸ ìµœê³  ì„±ëŠ¥]
    C --> F[âš ï¸ ë‚®ìŒ<br/>ê°œì„  í•„ìš”]
    D --> F

    E --> G[ì „ëµ: KoBART ì¤‘ì‹¬<br/>ë‹¨ì¼ ëª¨ë¸ ìµœì í™”]
    F --> H[ì „ëµ: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§<br/>Solar API í™œìš©]

    style A fill:#e1f5ff,stroke:#01579b,color:#000
    style B fill:#a5d6a7,stroke:#1b5e20,color:#000
    style C fill:#ffccbc,stroke:#bf360c,color:#000
    style D fill:#ffccbc,stroke:#bf360c,color:#000
    style E fill:#c8e6c9,stroke:#1b5e20,color:#000
    style F fill:#fff9c4,stroke:#f57f17,color:#000
    style G fill:#a5d6a7,stroke:#1b5e20,color:#000
    style H fill:#fff9c4,stroke:#f57f17,color:#000
```

---

## 2. ë©˜í† ë§ í”¼ë“œë°± ìš”ì•½

### 2.1 ë°ì´í„° ì¦ê°• ì „ëµ (50% ì¦ê°• ê¶Œì¥)

#### ë©˜í†  í”¼ë“œë°±

**âœ… ë§¤ìš° ì¢‹ì€ ë°©ë²•:**
1. **ì—­ë²ˆì—­ (Back-translation)**: í•œâ†’ì˜â†’í•œ ë³€í™˜
   - ê°€ì¥ íš¨ê³¼ì ì¸ ì¦ê°• ê¸°ë²•
   - ë‹¨, ë²ˆì—­ í’ˆì§ˆì´ ì¤‘ìš”

**âš ï¸ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©:**
2. **ì˜ì—­ (Paraphrase)**: ë¬¸ì¥ êµ¬ì¡° ë³€ê²½
   - ë°œí™”ì ë™ì¼ì„± í™•ì¸ í•„ìš”
3. **ëŒ€í™” í„´ ì„ê¸° (Turn Shuffling)**: ëŒ€í™” ìˆœì„œ ë³€ê²½
   - ë¬¸ë§¥ íë¦„ ìœ ì§€ í•„ìˆ˜
   - ì˜ˆ: "ì•ˆë…•í•˜ì„¸ìš”, ì ì‹¬ ë­ ë“œì…¨ë‚˜ìš”?" â†’ "ì ì‹¬ ë­ ë“œì…¨ë‚˜ìš”? ì•ˆë…•í•˜ì„¸ìš”." (âŒ ì˜ëª»ëœ ì˜ˆ)

**âš ï¸ êµ¬í˜„ í’ˆì§ˆ ê²€ì¦ í•„ìš”:**
4. **ë™ì˜ì–´ ì¹˜í™˜ (Synonym Replacement)**: ë‹¨ì–´ ì¹˜í™˜
   - ì œëŒ€ë¡œ ë°”ë€Œë©´ ì„±ëŠ¥ í–¥ìƒ
   - ì˜ëª» ë°”ë€Œë©´ ì„±ëŠ¥ ì €í•˜
5. **ëŒ€í™” ìƒ˜í”Œë§ (Dialogue Sampling)**: ì¼ë¶€ í„´ë§Œ ì¶”ì¶œ
   - í•µì‹¬ ëŒ€í™”ë§Œ ë‚¨ê¸°ë©´ íš¨ê³¼ì 
   - í•„ìˆ˜ ëŒ€í™” ì œì™¸ ì‹œ ì„±ëŠ¥ ì €í•˜

#### í˜„ì¬ êµ¬í˜„ ìƒíƒœ í™•ì¸

| ê¸°ë²• | êµ¬í˜„ ìƒíƒœ | íŒŒì¼ ìœ„ì¹˜ | í‰ê°€ |
|-----|----------|-----------|------|
| Back-translation | âœ… êµ¬í˜„ | `src/data/augmentation.py:113-149` | Helsinki-NLP MarianMT ì‚¬ìš© |
| Paraphrase | âœ… êµ¬í˜„ | `src/data/augmentation.py:151-177` | ê·œì¹™ ê¸°ë°˜ (ê°„ë‹¨) |
| Turn Shuffling | âœ… êµ¬í˜„ | `src/data/augmentation.py:179-217` | ì²˜ìŒ/ë ë³´ì¡´ |
| Synonym Replacement | âœ… êµ¬í˜„ | `src/data/augmentation.py:219-248` | ì‚¬ì „ ê¸°ë°˜ |
| Dialogue Sampling | âœ… êµ¬í˜„ | `src/data/augmentation.py:250-294` | ë¹„ìœ¨ ê¸°ë°˜ |

**ê²°ë¡ **: 5ê°€ì§€ ëª¨ë‘ êµ¬í˜„ë˜ì–´ ìˆìŒ âœ…

---

### 2.2 ì—­ë²ˆì—­ ëª¨ë¸ ë¬¸ì œ (Helsinki-NLP MarianMT)

#### ë¬¸ì œ ìƒí™©
```python
# src/data/augmentation.py:126
self.ko_en_tokenizer = MarianTokenizer.from_pretrained("Helsinki-NLP/opus-mt-ko-en")
self.ko_en_model = MarianMTModel.from_pretrained("Helsinki-NLP/opus-mt-ko-en")
```

**ë©˜í†  í”¼ë“œë°±:**
> "Helsinki-NLPì˜ MarianMT ëª¨ë¸ì€ ì²˜ìŒ ë“¤ì–´ë³´ëŠ” ëª¨ë¸ì¸ë°, ì´ ëª¨ë¸ì´ ì•ˆ ì¢‹ì€ ëª¨ë¸ì¸ê°€ìš”?"

#### í‰ê°€ ë° ëŒ€ì•ˆ

**MarianMT ëª¨ë¸ ë¶„ì„:**
- **ì¥ì **:
  - ë¹ ë¥¸ ì¶”ë¡  ì†ë„
  - ê²½ëŸ‰ ëª¨ë¸ (CPUì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥)
  - ë¬´ë£Œ
- **ë‹¨ì **:
  - í•œêµ­ì–´ ë²ˆì—­ í’ˆì§ˆì´ LLM ëŒ€ë¹„ ë‚®ìŒ
  - êµ¬ì–´ì²´, ëŒ€í™”ì²´ ì²˜ë¦¬ ì•½í•¨
  - ìµœì‹  ëª¨ë¸ ëŒ€ë¹„ ì„±ëŠ¥ ì œí•œì 

**ëŒ€ì•ˆ 1: Solar API ì‚¬ìš© (ê¶Œì¥) â­**
```python
# Solar APIë¥¼ í™œìš©í•œ ì—­ë²ˆì—­
import requests

def solar_back_translate(text: str, api_key: str) -> str:
    """Solar APIë¥¼ ì‚¬ìš©í•œ ê³ í’ˆì§ˆ ì—­ë²ˆì—­"""
    # 1. í•œêµ­ì–´ â†’ ì˜ì–´
    response_en = requests.post(
        "https://api.upstage.ai/v1/solar/chat/completions",
        headers={"Authorization": f"Bearer {api_key}"},
        json={
            "model": "solar-1-mini-translate-koen",
            "messages": [{"role": "user", "content": f"Translate to English: {text}"}]
        }
    )
    en_text = response_en.json()['choices'][0]['message']['content']

    # 2. ì˜ì–´ â†’ í•œêµ­ì–´
    response_ko = requests.post(
        "https://api.upstage.ai/v1/solar/chat/completions",
        headers={"Authorization": f"Bearer {api_key}"},
        json={
            "model": "solar-1-mini-translate-enko",
            "messages": [{"role": "user", "content": f"Translate to Korean: {en_text}"}]
        }
    )
    return response_ko.json()['choices'][0]['message']['content']
```

**ëŒ€ì•ˆ 2: NLLB-200 ëª¨ë¸ (ì¤‘ê°„ ì„ íƒì§€)**
- Metaì˜ NLLB-200 (No Language Left Behind)
- 200ê°œ ì–¸ì–´ ì§€ì›, í•œêµ­ì–´ ë²ˆì—­ í’ˆì§ˆ ìš°ìˆ˜
- ëª¨ë¸ í¬ê¸°: 600M~3.3B (ì„ íƒ ê°€ëŠ¥)
```python
from transformers import AutoTokenizer, AutoModelForSeq2SeqLM

tokenizer = AutoTokenizer.from_pretrained("facebook/nllb-200-distilled-600M")
model = AutoModelForSeq2SeqLM.from_pretrained("facebook/nllb-200-distilled-600M")
```

**ëŒ€ì•ˆ 3: í˜„ì¬ ëª¨ë¸ ìœ ì§€ (ì‹œê°„ ë¶€ì¡± ì‹œ)**
- MarianMTë„ ë‚˜ì˜ì§€ ì•Šì€ ì„ íƒ
- ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆì–´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥

#### ê¶Œì¥ ì¡°ì¹˜

```mermaid
graph TD
    A[ì—­ë²ˆì—­ ëª¨ë¸ ì„ íƒ] --> B{ì‹œê°„ ì—¬ìœ ?}

    B -->|1ì¼ ë‚¨ìŒ<br/>ì‹ ì† í•„ìš”| C[Solar API ì‚¬ìš©<br/>â­ ìµœê³  í’ˆì§ˆ]
    B -->|ì‹œê°„ ë¶€ì¡±| D[í˜„ì¬ MarianMT ìœ ì§€<br/>ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥]

    C --> E[ì¥ì :<br/>- ìµœê³  í’ˆì§ˆ<br/>- ëŒ€í™”ì²´ ê°•ì <br/>- ê°„ë‹¨í•œ API í˜¸ì¶œ]
    C --> F[ë‹¨ì :<br/>- API ë¹„ìš©<br/>- ì†ë„ ì œí•œ]

    D --> G[ì¥ì :<br/>- ë¬´ë£Œ<br/>- ë¹ ë¦„<br/>- ì´ë¯¸ êµ¬í˜„ë¨]
    D --> H[ë‹¨ì :<br/>- í’ˆì§ˆ ì œí•œ]

    E --> I[ì¶”ì²œ: Solar API]
    F --> I
    G --> J[ì°¨ì„ : MarianMT]
    H --> J

    style A fill:#e1f5ff,stroke:#01579b,color:#000
    style B fill:#fff3e0,stroke:#e65100,color:#000
    style C fill:#a5d6a7,stroke:#1b5e20,color:#000
    style D fill:#fff9c4,stroke:#f57f17,color:#000
    style E fill:#c8e6c9,stroke:#1b5e20,color:#000
    style F fill:#ffccbc,stroke:#bf360c,color:#000
    style G fill:#c8e6c9,stroke:#1b5e20,color:#000
    style H fill:#ffccbc,stroke:#bf360c,color:#000
    style I fill:#a5d6a7,stroke:#1b5e20,color:#000
    style J fill:#fff9c4,stroke:#f57f17,color:#000
```

**ìµœì¢… ê²°ì •**: Solar API ì‚¬ìš© ê¶Œì¥ (ì‹œê°„ì´ í—ˆë½í•˜ë©´)

---

### 2.3 ë§‰íŒ ìŠ¤í¼íŠ¸ ì „ëµ (ê²½ì§„ëŒ€íšŒ 1ì¼ ë‚¨ìŒ)

#### ë©˜í†  ê¶Œì¥ ì „ëµ

```mermaid
graph TB
    A[ë§‰íŒ ì „ëµ] --> B[ë‹¨ì¼ ëª¨ë¸<br/>ìµœê³  ì„±ëŠ¥ ì§‘ì¤‘]

    B --> C[KoBART ë‹¨ì¼ ëª¨ë¸<br/>ìµœì í™”]

    C --> D[ì „ì²˜ë¦¬ ê³ ë„í™”]
    C --> E[í›„ì²˜ë¦¬ ê³ ë„í™”]
    C --> F[í”„ë¡¬í”„íŠ¸<br/>ì—”ì§€ë‹ˆì–´ë§]

    D --> G[- í•˜ì´í¼íŒŒë¼ë¯¸í„° ì¡°ì •<br/>- íŠ¹ìˆ˜ë¬¸ì ì •ì œ<br/>- ëŒ€í™” ì •ê·œí™”<br/>- ë…¸ì´ì¦ˆ ì œê±°]

    E --> H[- ìš”ì•½ë¬¸ ê¸¸ì´ ì¡°ì •<br/>- ë¬¸ë²• êµì •<br/>- ì¤‘ë³µ ë¬¸ì¥ ì œê±°<br/>- ë¬¸ì¥ ì¢…ê²° ë³´ì¥]

    F --> I[- Solar API í™œìš©<br/>- Few-shot ì˜ˆì‹œ<br/>- ì§€ì‹œë¬¸ ìµœì í™”]

    G --> J[âš¡ ë¹ ë¥¸ ê°œì„ ]
    H --> J
    I --> J

    J --> K[âœ… ì ìˆ˜ í–¥ìƒ]

    style A fill:#e1f5ff,stroke:#01579b,color:#000
    style B fill:#fff3e0,stroke:#e65100,color:#000
    style C fill:#a5d6a7,stroke:#1b5e20,color:#000
    style D fill:#c8e6c9,stroke:#1b5e20,color:#000
    style E fill:#c8e6c9,stroke:#1b5e20,color:#000
    style F fill:#c8e6c9,stroke:#1b5e20,color:#000
    style G fill:#fff9c4,stroke:#f57f17,color:#000
    style H fill:#fff9c4,stroke:#f57f17,color:#000
    style I fill:#fff9c4,stroke:#f57f17,color:#000
    style J fill:#a5d6a7,stroke:#1b5e20,color:#000
    style K fill:#81c784,stroke:#1b5e20,color:#000
```

#### ìš°ì„ ìˆœìœ„

1. **P0 (ì¦‰ì‹œ ì ìš©)**:
   - ë°ì´í„° ì¦ê°• 50% ì ìš©
   - KoBART ë‹¨ì¼ ëª¨ë¸ ì¬í•™ìŠµ
   - í›„ì²˜ë¦¬ ê°•í™” (ë¬¸ì¥ ëŠê¹€ ë¬¸ì œ í•´ê²° ì™„ë£Œ âœ…)

2. **P1 (ë‹¹ì¼ ì ìš©)**:
   - í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ (Solar API)
   - ì „ì²˜ë¦¬ ê³ ë„í™” (íŠ¹ìˆ˜ë¬¸ì, ë…¸ì´ì¦ˆ)

3. **P2 (ì‹œê°„ ë‚¨ìœ¼ë©´)**:
   - ì—­ë²ˆì—­ ëª¨ë¸ êµì²´ (Solar API)
   - í•˜ì´í¼íŒŒë¼ë¯¸í„° Optuna ìµœì í™”

---

## 3. ê°œì„ ì‚¬í•­ ë° ì¡°ì¹˜

### 3.1 ë°ì´í„° ì¦ê°• 50% ì ìš©

#### í˜„í™© ë¶„ì„
```python
# í˜„ì¬ ì½”ë“œ í™•ì¸ í•„ìš”: scripts/train.py
parser.add_argument('--augmentation_ratio', type=float, default=?, ...)
```

#### ìˆ˜ì • í•„ìš” ì‚¬í•­

**íŒŒì¼**: `scripts/train.py`

```python
# ë³€ê²½ ì „ (ì¶”ì •)
parser.add_argument(
    '--augmentation_ratio',
    type=float,
    default=0.3,  # 30%
    help='ë°ì´í„° ì¦ê°• ë¹„ìœ¨'
)

# ë³€ê²½ í›„
parser.add_argument(
    '--augmentation_ratio',
    type=float,
    default=0.5,  # 50% â­ ë©˜í†  ê¶Œì¥
    help='ë°ì´í„° ì¦ê°• ë¹„ìœ¨ (ë©˜í†  ê¶Œì¥: 0.5)'
)

# ì¦ê°• ë°©ë²• ìš°ì„ ìˆœìœ„ (ë©˜í†  í”¼ë“œë°± ë°˜ì˜)
parser.add_argument(
    '--augmentation_methods',
    type=str,
    nargs='+',
    default=['back_translate', 'paraphrase'],  # â­ ì•ˆì „í•œ ë°©ë²•ë§Œ
    choices=['back_translate', 'paraphrase', 'shuffle', 'synonym', 'sample'],
    help='ë°ì´í„° ì¦ê°• ë°©ë²• (ê¶Œì¥: back_translate, paraphrase)'
)
```

#### ì£¼ì˜ì‚¬í•­
- **Turn Shuffling**: í˜„ì¬ êµ¬í˜„ì´ ì²˜ìŒ/ëì„ ë³´ì¡´í•˜ë¯€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‚˜ ê²€ì¦ í•„ìš”
- **Synonym Replacement**: ì‚¬ì „ í’ˆì§ˆ í™•ì¸ í•„ìš”
- **Dialogue Sampling**: í•µì‹¬ ëŒ€í™” ë³´ì¡´ ë¡œì§ ê²€ì¦ í•„ìš”

---

### 3.2 í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ (Solar API)

#### êµ¬í˜„ ë°©ì•ˆ

**íŒŒì¼**: `src/inference/solar_api_enhancer.py` (ì‹ ê·œ ìƒì„± ê¶Œì¥)

```python
"""
Solar APIë¥¼ í™œìš©í•œ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
ë©˜í†  ê¶Œì¥: LLM í”„ë¡¬í”„íŠ¸ëŠ” ì „ì²˜ë¦¬/í›„ì²˜ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš© ì‹œ íš¨ê³¼ ê·¹ëŒ€í™”
"""

import requests
from typing import List

class SolarAPIEnhancer:
    """Solar API ê¸°ë°˜ ìš”ì•½ í’ˆì§ˆ í–¥ìƒ"""

    def __init__(self, api_key: str):
        self.api_key = api_key
        self.api_url = "https://api.upstage.ai/v1/solar/chat/completions"

    def enhance_summary(self, dialogue: str, model_summary: str) -> str:
        """
        ëª¨ë¸ ìš”ì•½ë¬¸ì„ Solar APIë¡œ ê°œì„ 

        Args:
            dialogue: ì›ë³¸ ëŒ€í™”
            model_summary: ëª¨ë¸ì´ ìƒì„±í•œ ìš”ì•½

        Returns:
            ê°œì„ ëœ ìš”ì•½ë¬¸
        """
        prompt = f"""ë‹¤ìŒì€ ëŒ€í™”ì™€ ê·¸ì— ëŒ€í•œ ìš”ì•½ì…ë‹ˆë‹¤.
ìš”ì•½ë¬¸ì„ ë” ê°„ê²°í•˜ê³  ëª…í™•í•˜ê²Œ ê°œì„ í•´ì£¼ì„¸ìš”.

[ëŒ€í™”]
{dialogue}

[í˜„ì¬ ìš”ì•½]
{model_summary}

[ê°œì„  ì§€ì¹¨]
1. í•µì‹¬ ë‚´ìš©ì€ ìœ ì§€
2. ë¶ˆí•„ìš”í•œ ë°˜ë³µ ì œê±°
3. ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ë¡œ ì‘ì„±
4. 2-3ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ

ê°œì„ ëœ ìš”ì•½:"""

        response = requests.post(
            self.api_url,
            headers={"Authorization": f"Bearer {self.api_key}"},
            json={
                "model": "solar-1-mini-chat",
                "messages": [{"role": "user", "content": prompt}],
                "temperature": 0.3,  # ì¼ê´€ì„± ìˆëŠ” ì¶œë ¥
                "max_tokens": 200
            }
        )

        return response.json()['choices'][0]['message']['content'].strip()
```

#### ì ìš© ì „ëµ
1. KoBART ë‹¨ì¼ ëª¨ë¸ë¡œ 1ì°¨ ìš”ì•½ ìƒì„±
2. Solar APIë¡œ 2ì°¨ í’ˆì§ˆ ê°œì„ 
3. í›„ì²˜ë¦¬ë¡œ ìµœì¢… ì •ì œ

---

### 3.3 ì „ì²˜ë¦¬ ê³ ë„í™”

#### ìˆ˜ì • íŒŒì¼: `src/data/preprocessing.py`

**ì¶”ê°€ ì „ì²˜ë¦¬ í•¨ìˆ˜:**

```python
def advanced_preprocessing(dialogue: str) -> str:
    """ê³ ë„í™”ëœ ì „ì²˜ë¦¬"""
    # 1. íŠ¹ìˆ˜ë¬¸ì ì •ì œ
    dialogue = re.sub(r'[^\w\sê°€-í£#:.,!?]', '', dialogue)

    # 2. ë°˜ë³µ ê³µë°± ì œê±°
    dialogue = re.sub(r'\s+', ' ', dialogue)

    # 3. ëŒ€í™” ì •ê·œí™” (#Person1#: í˜•ì‹ í†µì¼)
    dialogue = re.sub(r'#Person(\d+)#\s*:', r'#Person\1#:', dialogue)

    # 4. ë…¸ì´ì¦ˆ íŒ¨í„´ ì œê±° (ì´ëª¨í‹°ì½˜, íŠ¹ìˆ˜ê¸°í˜¸ ë“±)
    dialogue = re.sub(r'[ã…‹ã…ã… ã…œ]{2,}', '', dialogue)  # ã…‹ã…‹ã…‹, ã…ã…ã… ë“±

    return dialogue.strip()
```

---

### 3.4 í›„ì²˜ë¦¬ ê°•í™” (ì´ë¯¸ ì ìš©ë¨ âœ…)

#### í˜„ì¬ ìƒíƒœ
- `src/inference/predictor.py`ì— ê°•í™”ëœ í›„ì²˜ë¦¬ í•¨ìˆ˜ êµ¬í˜„ ì™„ë£Œ
- 99.6% ì™„ì „í•œ ë¬¸ì¥ ìƒì„± ë‹¬ì„±
- ì¶”ê°€ ê°œì„  ë¶ˆí•„ìš”

---

## 4. ìµœì¢… ì „ëµ ìˆ˜ë¦½

### 4.1 ë‹¨ì¼ ëª¨ë¸ ìµœì í™” ì „ëµ

```mermaid
graph TB
    A[ìµœì¢… ì „ëµ] --> B[KoBART ë‹¨ì¼ ëª¨ë¸]

    B --> C[1ë‹¨ê³„:<br/>ë°ì´í„° ì¦ê°• 50%]
    B --> D[2ë‹¨ê³„:<br/>ì „ì²˜ë¦¬ ê³ ë„í™”]
    B --> E[3ë‹¨ê³„:<br/>KoBART ì¬í•™ìŠµ]
    B --> F[4ë‹¨ê³„:<br/>Solar API í›„ì²˜ë¦¬]
    B --> G[5ë‹¨ê³„:<br/>ìµœì¢… ì œì¶œ]

    C --> H[- back_translate<br/>- paraphrase<br/>ì¦ê°• ë¹„ìœ¨: 0.5]

    D --> I[- íŠ¹ìˆ˜ë¬¸ì ì •ì œ<br/>- ë…¸ì´ì¦ˆ ì œê±°<br/>- ì •ê·œí™”]

    E --> J[- epochs: 5<br/>- batch_size: 16<br/>- learning_rate: 3e-5]

    F --> K[- Solar API ê°œì„ <br/>- ë¬¸ë²• êµì •<br/>- í’ˆì§ˆ í–¥ìƒ]

    G --> L[âœ… ìµœê³  ì ìˆ˜<br/>ëª©í‘œ ë‹¬ì„±]

    style A fill:#e1f5ff,stroke:#01579b,color:#000
    style B fill:#fff3e0,stroke:#e65100,color:#000
    style C fill:#c8e6c9,stroke:#1b5e20,color:#000
    style D fill:#c8e6c9,stroke:#1b5e20,color:#000
    style E fill:#c8e6c9,stroke:#1b5e20,color:#000
    style F fill:#c8e6c9,stroke:#1b5e20,color:#000
    style G fill:#a5d6a7,stroke:#1b5e20,color:#000
    style H fill:#fff9c4,stroke:#f57f17,color:#000
    style I fill:#fff9c4,stroke:#f57f17,color:#000
    style J fill:#fff9c4,stroke:#f57f17,color:#000
    style K fill:#fff9c4,stroke:#f57f17,color:#000
    style L fill:#81c784,stroke:#1b5e20,color:#000
```

### 4.2 ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# 1. ë°ì´í„° ì¦ê°• í¬í•¨ í•™ìŠµ
python scripts/train.py \
  --mode train \
  --models kobart \
  --augmentation_ratio 0.5 \
  --augmentation_methods back_translate paraphrase \
  --num_train_epochs 5 \
  --per_device_train_batch_size 16 \
  --learning_rate 3e-5 \
  --max_new_tokens 200 \
  --experiment_name final_kobart_aug50

# 2. Solar API í›„ì²˜ë¦¬ ì ìš© ì¶”ë¡ 
python scripts/inference_with_solar.py \
  --model experiments/.../final_kobart_aug50/final_model \
  --solar_api_key $SOLAR_API_KEY \
  --output submissions/final_submission.csv
```

---

## 5. ì‹¤í–‰ ê³„íš

### 5.1 íƒ€ì„ë¼ì¸

| ì‹œê°„ | ì‘ì—… | ì˜ˆìƒ ì†Œìš” |
|------|------|----------|
| **T+0h** | ì½”ë“œ ìˆ˜ì • (augmentation_ratio, ì „ì²˜ë¦¬) | 30ë¶„ |
| **T+0.5h** | KoBART ì¬í•™ìŠµ ì‹œì‘ | 2-3ì‹œê°„ |
| **T+3.5h** | Solar API í›„ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± | 1ì‹œê°„ |
| **T+4.5h** | ì¶”ë¡  ë° ì œì¶œ íŒŒì¼ ìƒì„± | 30ë¶„ |
| **T+5h** | ê²€ì¦ ë° ìµœì¢… ì œì¶œ | 30ë¶„ |

**ì´ ì˜ˆìƒ ì‹œê°„**: ì•½ 5-6ì‹œê°„

### 5.2 ì²´í¬ë¦¬ìŠ¤íŠ¸

#### Phase 1: ì½”ë“œ ìˆ˜ì • (30ë¶„)
- [ ] `scripts/train.py`: augmentation_ratio â†’ 0.5
- [ ] `scripts/train.py`: augmentation_methods â†’ ['back_translate', 'paraphrase']
- [ ] `src/data/preprocessing.py`: advanced_preprocessing() ì¶”ê°€
- [ ] `src/inference/solar_api_enhancer.py`: SolarAPIEnhancer í´ë˜ìŠ¤ ìƒì„±

#### Phase 2: í•™ìŠµ (2-3ì‹œê°„)
- [ ] KoBART ì¬í•™ìŠµ ì‹œì‘
- [ ] í•™ìŠµ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
- [ ] ROUGE ì ìˆ˜ í™•ì¸

#### Phase 3: Solar API í›„ì²˜ë¦¬ (1.5ì‹œê°„)
- [ ] Solar API í‚¤ í™•ì¸
- [ ] í›„ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] í…ŒìŠ¤íŠ¸ ìƒ˜í”Œ ê²€ì¦

#### Phase 4: ì¶”ë¡  ë° ì œì¶œ (1ì‹œê°„)
- [ ] ì¶”ë¡  ì‹¤í–‰
- [ ] ì œì¶œ íŒŒì¼ ìƒì„±
- [ ] ìƒ˜í”Œ ê²€ì¦ (ë¬¸ì¥ ëŠê¹€, í’ˆì§ˆ)
- [ ] ìµœì¢… ì œì¶œ

---

## 6. ìœ„í—˜ ê´€ë¦¬

### 6.1 ì ì¬ì  ë¬¸ì œ

| ë¬¸ì œ | í™•ë¥  | ëŒ€ì‘ ë°©ì•ˆ |
|-----|------|----------|
| Solar API ì†ë„ ì œí•œ | ì¤‘ê°„ | ë°°ì¹˜ í¬ê¸° ì¡°ì •, ì¬ì‹œë„ ë¡œì§ |
| í•™ìŠµ ì‹œê°„ ì´ˆê³¼ | ë‚®ìŒ | Epochs ê°ì†Œ (5 â†’ 3) |
| ì¦ê°• ë°ì´í„° í’ˆì§ˆ ì €í•˜ | ë‚®ìŒ | back_translateë§Œ ì‚¬ìš© |

### 6.2 Fallback ì „ëµ

**Plan B**: ì‹œê°„ ë¶€ì¡± ì‹œ
1. ë°ì´í„° ì¦ê°• ì—†ì´ í˜„ì¬ KoBART ëª¨ë¸ ì‚¬ìš©
2. Solar API í›„ì²˜ë¦¬ë§Œ ì ìš©
3. ì¦‰ì‹œ ì œì¶œ

---

## 7. ê¸°ëŒ€ íš¨ê³¼

### 7.1 ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ

| í•­ëª© | í˜„ì¬ | ê°œì„  í›„ (ì˜ˆìƒ) | í–¥ìƒí­ |
|-----|------|-------------|--------|
| ROUGE-1 | 0.4048 | **0.45-0.47** | +10-15% |
| ROUGE-2 | 0.2480 | **0.27-0.29** | +10-15% |
| ROUGE-L | 0.3952 | **0.44-0.46** | +10-15% |

### 7.2 ê°œì„  ê·¼ê±°
- ë°ì´í„° ì¦ê°• 50%: +3-5% (ë©˜í†  í”¼ë“œë°±)
- ì „ì²˜ë¦¬ ê³ ë„í™”: +2-3%
- Solar API í›„ì²˜ë¦¬: +5-7%

---

## 8. ì°¸ê³  ë¬¸ì„œ

- `docs/issues/ì‹œìŠ¤í…œ_ë¬¸ì œ_ê°œì„ _ê³¼ì •.md`: ê¸°ì¡´ ë¬¸ì œì  ë¶„ì„
- `docs/issues/ë¬¸ì¥_ëŠê¹€_ë¬¸ì œ_í•´ê²°_ê³¼ì •.md`: í›„ì²˜ë¦¬ ê°œì„  ì™„ë£Œ
- `docs/experiments/20251012_131535_test_full_pipeline_quick_ì‹¤í—˜ë¶„ì„.md`: ì´ì „ ì‹¤í—˜ ë¶„ì„

---

**ì‘ì„±ì**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2025-10-14
**ë²„ì „**: 1.0
