# ì¼ìƒ ëŒ€í™” ìš”ì•½ - ì¢…í•© ì‹¤í—˜ ë¡œê·¸

## ê°œìš”

- **ëŒ€íšŒëª…**: NIKLuge 2024 - ì¼ìƒ ëŒ€í™” ìš”ì•½
- **í‰ê°€ ì§€í‘œ**: ROUGE-F1 (ROUGE-1, ROUGE-2, ROUGE-L í‰ê· )
- **ëª©í‘œ**: 50ì  ì´ìƒ ë‹¬ì„±
- **í˜„ì¬ ìµœê³  ì ìˆ˜**: **47.47ì ** (Phase 1: LP=0.5)
- **ì œì¶œ íšŸìˆ˜**: **12/12 ì‚¬ìš© ì™„ë£Œ**
- **í”„ë¡œì íŠ¸ ê¸°ê°„**: 2025-10-12 ~ 2025-10-15

---

## ì‹¤í—˜ ìš”ì•½ í…Œì´ë¸”

| Exp | ë‚ ì§œ | ì£¼ìš” ë³€ê²½ì‚¬í•­ | Dev ROUGE-1 | Test Score | ì œì¶œ | Loss Gap | ë¹„ê³  |
|-----|------|--------------|-------------|------------|------|----------|------|
| **Baseline** | 10/12 | digit82/kobart ì¬í˜„ | ~36% | 47.12 | 1/12 | - | ì¬í˜„ ì„±ê³µ |
| **Phase 1** | 10/13 | LP=0.5 | - | **47.47** | 2/12 | - | ğŸ† **ìµœê³ ì ** |
| #5 | 10/14 | no_repeat_ngram=3 | - | 47.03 | 8/12 | - | ë¯¸ì„¸ í•˜ë½ |
| **#7-A** | 10/15 | ì¦ê°• ë°ì´í„° (ê°€ì¤‘ì¹˜ ì—†ìŒ) | **36.18%** | **47.41** | 11/12 | **+0.50** | âœ… ì•ˆì •ì  |
| **#7-F** | 10/15 | ì¦ê°• + WeightedSampler | **36.43%** | **46.62** | 12/12 | **-0.47** | âŒ ê³¼ì í•© |

### ì ìˆ˜ ë³€í™” ì¶”ì´
```
47.12 (Baseline) â†’ 47.47 (LP=0.5) ğŸ† â†’ 47.03 (ngram=3) â†’ 47.41 (ì¦ê°•) â†’ 46.62 (ê°€ì¤‘ì¹˜) âŒ
```

---

## ìƒì„¸ ì‹¤í—˜ ê¸°ë¡

### Baseline: ì›ë³¸ ì¬í˜„
**ë‚ ì§œ**: 2025-10-12

**ëª©í‘œ**: ê³µì‹ Baseline ì½”ë“œ ì¬í˜„ ê²€ì¦

**ë³€ê²½ì‚¬í•­**:
- ëª¨ë¸: `digit82/kobart-summarization`
- í•˜ì´í¼íŒŒë¼ë¯¸í„°:
  - Learning Rate: 1e-5
  - Batch Size: 50 (train), 32 (eval)
  - Epochs: 20
  - Early Stopping: patience=3
  - Warmup Ratio: 0.1
  - Generation: LP=1.0, num_beams=4, no_repeat_ngram_size=2

**ê²°ê³¼**:
- Test Score: **47.12ì **
- í•™ìŠµ ì‹œê°„: ~20ë¶„

**ì¸ì‚¬ì´íŠ¸**:
- âœ… Baseline ì¬í˜„ ì„±ê³µ
- âœ… ê³µì‹ ì½”ë“œê°€ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•¨
- âœ… 47ì ëŒ€ê°€ ì¶œë°œì„ ì„ì„ í™•ì¸

**ë‹¤ìŒ ë‹¨ê³„**: Length Penalty íŠœë‹

---

### Phase 1: Length Penalty ìµœì í™”
**ë‚ ì§œ**: 2025-10-13

**ëª©í‘œ**: Generation íŒŒë¼ë¯¸í„° ìµœì í™”ë¡œ ë¹ ë¥¸ ì„±ëŠ¥ í–¥ìƒ

**ì‹¤í—˜ ì„¤ê³„**:
- LP=0.3, 0.5, 0.7, 1.0 ìˆœì°¨ í…ŒìŠ¤íŠ¸
- ë‹¤ë¥¸ í•˜ì´í¼íŒŒë¼ë¯¸í„°ëŠ” Baseline ìœ ì§€
- ê° ì‹¤í—˜ë§ˆë‹¤ Test ì œì¶œ

**ê²°ê³¼**:
| LP | Test Score | ë³€í™” |
|----|------------|------|
| 1.0 | 47.12 | Baseline |
| 0.5 | **47.47** | **+0.35** ğŸ† |
| 0.3 | 47.15 | +0.03 |
| 0.7 | 47.22 | +0.10 |

**ìµœì ê°’**: **LP=0.5** (47.47ì )

**ì¸ì‚¬ì´íŠ¸**:
- âœ… **LP ë‚®ì¶”ë©´ ìš”ì•½ë¬¸ì´ ê¸¸ì–´ì§** â†’ ROUGE ì ìˆ˜ ìƒìŠ¹
- âœ… LP=0.3ì€ ë„ˆë¬´ ë‚®ìŒ (ê³¼ë„í•˜ê²Œ ê¸´ ìš”ì•½)
- âœ… **LP=0.5ê°€ sweet spot**
- âœ… ê°„ë‹¨í•œ ë³€ê²½ìœ¼ë¡œ +0.35ì  ë‹¬ì„±

**ì˜í–¥**:
- ëª¨ë“  í›„ì† ì‹¤í—˜ì˜ ê¸°ë³¸ê°’ìœ¼ë¡œ LP=0.5 ì±„íƒ

---

### Exp #5: no_repeat_ngram_size=3
**ë‚ ì§œ**: 2025-10-14

**ëª©í‘œ**: ë°˜ë³µ ì–µì œ ê°•í™”ë¡œ ìš”ì•½ í’ˆì§ˆ í–¥ìƒ

**ë³€ê²½ì‚¬í•­**:
- no_repeat_ngram_size: 2 â†’ 3
- ë‹¤ë¥¸ íŒŒë¼ë¯¸í„°: Phase 1 ì„¤ì • ìœ ì§€ (LP=0.5)

**ê²°ê³¼**:
- Test Score: **47.03ì ** (-0.44 from Phase 1)

**ì¸ì‚¬ì´íŠ¸**:
- âŒ ë°˜ë³µ ì–µì œ ê°•í™”ê°€ ì˜¤íˆë ¤ ì„±ëŠ¥ ì €í•˜
- âŒ ëª¨ë¸ì˜ ìì—°ìŠ¤ëŸ¬ìš´ ë°˜ë³µ íŒ¨í„´ì„ ê³¼ë„í•˜ê²Œ ì œí•œ
- âœ… Baseline ì„¤ì •(ngram=2)ì´ ì´ë¯¸ ìµœì 

**ê²°ë¡ **: Rollback to no_repeat_ngram_size=2

---

### Exp #6: Learning Rate 3e-5
**ë‚ ì§œ**: 2025-10-14

**ëª©í‘œ**: ì¦ê°• ë°ì´í„° ì¶”ê°€ í›„ LR íŠœë‹ ì¤€ë¹„

**ìƒíƒœ**: **ì‹¤í—˜ ë³´ë¥˜ (Deferred)**

**ì´ìœ **:
1. ì¦ê°• ë°ì´í„° íš¨ê³¼ë¥¼ ë¨¼ì € ê²€ì¦ í•„ìš”
2. LR íŠœë‹ì€ ì¦ê°• ì•ˆì •ì„± í™•ì¸ í›„ ì§„í–‰
3. ì œì¶œ íšŸìˆ˜ ì ˆì•½ (12íšŒ ì œí•œ)

**ê³„íš**: Exp #7 (ì¦ê°•) ì„±ê³µ ì‹œ ì§„í–‰

---

### Exp #7-A: ì¦ê°• ë°ì´í„° (ê°€ì¤‘ì¹˜ ì—†ìŒ)
**ë‚ ì§œ**: 2025-10-15

**ëª©í‘œ**: ë°ì´í„° ì¦ê°•ìœ¼ë¡œ ë‹¤ì–‘ì„± í™•ë³´ ë° ì„±ëŠ¥ í–¥ìƒ

#### ë°ì´í„° êµ¬ì„±
- **ì›ë³¸ ë°ì´í„°**: 12,457ê°œ
- **ì¦ê°• ë°ì´í„°**: 1,009ê°œ (+8.1%)
- **ìµœì¢… ë°ì´í„°**: 13,465ê°œ
- **ì¦ê°• ë°©ë²•**: ChatGPT-4 ê¸°ë°˜ ëŒ€í™” ìƒì„±

#### ì¦ê°• ë°ì´í„° ë¶„í¬
```
ë„ë©”ì¸ë³„ ë¶„í¬:
- ê°€ì¡± ê´€ê³„: 82ê°œ
- ê±´ê°•/ìš´ë™: 92ê°œ
- ë…¸ë™/ê³ ìš©: 135ê°œ
- í™˜ê²½: 200ê°œ
- ê°ì • ì§€ì›: 130ê°œ
...
```

#### í•˜ì´í¼íŒŒë¼ë¯¸í„°
```yaml
í•™ìŠµ:
  Learning Rate: 1e-5
  Batch Size: 24 (per_device)
  Gradient Accumulation: 3 (effective batch=72)
  Epochs: 20
  Early Stopping: patience=3
  Warmup Ratio: 0.1

ìƒì„±:
  Length Penalty: 0.5
  Num Beams: 4
  No Repeat Ngram: 2
  Max Length: 100

ìƒ˜í”Œë§:
  WeightedRandomSampler: âŒ ì‚¬ìš© ì•ˆ í•¨
  ìì—° ë¶„í¬ë¡œ í•™ìŠµ
```

#### í•™ìŠµ ê²°ê³¼

**Loss ì¶”ì´**:
```
Epoch   Train Loss   Eval Loss   Dev ROUGE-1
  1       3.1937       -          15.45%
  2       0.8482       -          21.85%
  3       0.5707       -          29.60%
  4       0.5425       -          34.45%
  5       0.5336       -          35.21%
  6       0.5299       -          35.43%
  7       0.5264       -          36.18%
  8       0.5252       -          36.13%
  9       0.5233       -          36.60%
 10       0.5241       -          35.80%
 11       0.5246       -          36.18%  â† Best Epoch
 12       0.5255       -          35.93%
```

**ìµœì¢… Loss**:
- Train Loss: **1.0278**
- Eval Loss: **0.5255**
- **Loss Gap: +0.5023** (Train > Eval, ì•ˆì •ì )

**Best Checkpoint**: Epoch 11 (checkpoint-2068)
- Dev ROUGE-1: **36.18%**
- Dev ROUGE-2: 12.99%
- Dev ROUGE-L: 33.83%

#### Test ê²°ê³¼
- Test Score: **47.41ì **
- ë³€í™”: -0.06 (from Phase 1 ìµœê³ ì  47.47)
- ì œì¶œ: 11/12

#### ì¸ì‚¬ì´íŠ¸

**âœ… ì„±ê³µ ìš”ì¸**:
1. **Loss Gapì´ ì–‘ìˆ˜ (+0.50)**
   - Train Loss > Eval Loss
   - ëª¨ë¸ì´ Trainë³´ë‹¤ Evalì—ì„œ ë” ì–´ë ¤ì›Œí•¨
   - **ì •ìƒì ì¸ í•™ìŠµ, ì•ˆì •ì  ì¼ë°˜í™”**

2. **ì¦ê°• ë°ì´í„°ê°€ ë‹¤ì–‘ì„± í™•ë³´**
   - 1,009ê°œ ì¶”ê°€ë¡œ 8.1% ë°ì´í„° ì¦ê°€
   - ì„±ëŠ¥ ìœ ì§€í•˜ë©´ì„œ ê³¼ì í•© ë°©ì§€

3. **ê°€ì¤‘ì¹˜ ì—†ì´ ìì—° ë¶„í¬ í•™ìŠµ**
   - ëª¨ë¸ì´ ìì—°ìŠ¤ëŸ½ê²Œ íŒ¨í„´ í•™ìŠµ
   - íŠ¹ì • ì¹´í…Œê³ ë¦¬ í¸í–¥ ì—†ìŒ

**ğŸ“Š ë¶„ì„**:
- Dev ROUGE-1: 36.18% (ì°¸ê³ ìš©)
- Test Score: 47.41ì  (ì‹¤ì œ ì„±ëŠ¥)
- **Devì™€ Testì˜ ê´´ë¦¬ ì¡´ì¬** (36% vs 47ì )
- Loss Gapì´ ë” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì§€í‘œ

**ê²°ë¡ **:
- âœ… ì¦ê°• ë°ì´í„°ê°€ ì•ˆì •ì„±ì„ ì œê³µí•¨
- âœ… í–¥í›„ LR íŠœë‹ì˜ ê¸°ë°˜ ë§ˆë ¨
- âœ… Loss Gap ì–‘ìˆ˜ ìœ ì§€ê°€ í•µì‹¬

---

### Exp #7-C: ê°€ì¤‘ì¹˜ ê³¼ë‹¤ (ì‹¤íŒ¨)
**ë‚ ì§œ**: 2025-10-15

**ëª©í‘œ**: WeightedRandomSamplerë¡œ ì†Œìˆ˜ ì¹´í…Œê³ ë¦¬ í•™ìŠµ ê°•í™”

**ë³€ê²½ì‚¬í•­**:
- WeightedRandomSampler ì ìš©
- ê°€ì¤‘ì¹˜: `min(ê¶Œì¥ê°’, 5.0)`
- Threshold: 500ê°œ
- ë„ë©”ì¸ë³„ ê°€ì¤‘ì¹˜ ì˜ˆì‹œ:
  - ë…¸ë™/ê³ ìš© (135ê°œ): 3.70ë°°
  - í™˜ê²½ (200ê°œ): 2.50ë°°

#### í•™ìŠµ ê²°ê³¼

**Loss ì¶”ì´**:
```
Epoch   Train Loss   Eval Loss   Dev ROUGE-1
  1       3.1991       -          15.18%
  2       0.8584       -          22.04%
  3       0.5882       -          33.10%
  ...
 11       0.5475       -          35.95%
 12       0.5474       -          35.79%
```

**ìµœì¢… Loss**:
- Train Loss: **0.9519**
- Eval Loss: **0.5474**
- **Loss Gap: +0.4045** (ì–‘ìˆ˜ì´ì§€ë§Œ #7-Aë³´ë‹¤ ë‚®ìŒ)

**Dev ROUGE-1**: 35.95% (Epoch 11)

#### ê²°ê³¼
- **ì œì¶œ**: âŒ ìŠ¤í‚µ
- **ì´ìœ **: Loss Gapì´ #7-A(+0.50)ë³´ë‹¤ ë‚®ìŒ â†’ ê³¼ì í•© ìš°ë ¤

#### ì¸ì‚¬ì´íŠ¸
- âŒ ê°€ì¤‘ì¹˜ 5.0 ìƒí•œë„ ì—¬ì „íˆ ë†’ìŒ
- âŒ Loss Gap ê°ì†Œ = ì¼ë°˜í™” ëŠ¥ë ¥ ì €í•˜
- âœ… Loss Gap ë¹„êµë¡œ ì‚¬ì „ ì‹¤íŒ¨ ì˜ˆì¸¡ ì„±ê³µ

**íŒë‹¨**: Exp #7-Fë¡œ ê°€ì¤‘ì¹˜ ì¡°ì • í›„ ì¬ì‹œë„

---

### Exp #7-F: ì¦ê°• + ê°€ì¤‘ì¹˜ ì¡°ì • (ìµœì¢… ì‹¤íŒ¨)
**ë‚ ì§œ**: 2025-10-15

**ëª©í‘œ**: ê°€ì¤‘ì¹˜ë¥¼ ë”ìš± ë‚®ì¶°ì„œ ì•ˆì •ì  í•™ìŠµ

#### ë³€ê²½ì‚¬í•­

**WeightedRandomSampler ì„¤ì •**:
```python
ë„ë©”ì¸ threshold: 500ê°œ
ì„œë¸Œí´ëŸ¬ìŠ¤í„° threshold: 300ê°œ

ê°€ì¤‘ì¹˜ ì˜ˆì‹œ:
- ë…¸ë™/ê³ ìš© (135ê°œ â†’ 500íšŒ): 3.70ë°°
- í™˜ê²½ (200ê°œ â†’ 500íšŒ): 2.50ë°°
- ê°ì • ì§€ì› (130ê°œ â†’ 300íšŒ): 2.31ë°°
```

#### í•˜ì´í¼íŒŒë¼ë¯¸í„°
```yaml
í•™ìŠµ:
  Learning Rate: 1e-5
  Batch Size: 24
  Gradient Accumulation: 3 (effective=72)
  Epochs: 20
  Early Stopping: patience=3

ìƒ˜í”Œë§:
  WeightedRandomSampler: âœ… í™œì„±í™”
  ë„ë©”ì¸ ê°€ì¤‘ì¹˜: threshold/ìƒ˜í”Œ ìˆ˜
  ì„œë¸Œí´ëŸ¬ìŠ¤í„° ê°€ì¤‘ì¹˜: threshold/ìƒ˜í”Œ ìˆ˜
```

#### í•™ìŠµ ê²°ê³¼

**Loss ì¶”ì´**:
```
Epoch   Train Loss   Eval Loss   Dev ROUGE-1   Loss Gap
  1       3.1969       -          15.11%         -
  2       0.8527       -          21.47%         -
  3       0.5785       -          32.59%         -
  4       0.5505       -          34.30%         -
  5       0.5420       -          34.57%         -
  6       0.5370       -          35.61%         -
  7       0.5350       -          35.89%         -
  8       0.5323       -          36.11%         -
  9       0.5293       -          36.22%         â† Best Epoch
 10       0.5324       -          36.43%         -
 11       0.5296       -          36.01%         -
 12       0.5301       -          35.78%         -
```

**ìµœì¢… Loss**:
- Train Loss: **1.0008**
- Eval Loss: **0.5301**
- **Loss Gap: +0.4707** (ì–‘ìˆ˜)

**BUT**: ì‹¤ì œ Loss Gapì€ ìµœì¢… ê°’ì´ ì•„ë‹Œ **Best Epoch ê¸°ì¤€**:
- Best Epoch: 9
- Eval Loss: 0.5293
- **ì‹¤ì œ Loss Gap: 1.0008 - 0.5293 = +0.4715**

**í•˜ì§€ë§Œ ë¬¸ì œëŠ”...**:
- Train LossëŠ” ì „ì²´ ì—í­ í‰ê· 
- Eval LossëŠ” Best Epoch ê¸°ì¤€
- **ë¹„êµ ê¸°ì¤€ ë¶ˆì¼ì¹˜** â†’ Loss Gap í•´ì„ ì£¼ì˜ í•„ìš”

#### Dev ê²°ê³¼
- Best Checkpoint: Epoch 9 (checkpoint-1880)
- Dev ROUGE-1: **36.22%** (Epoch 9)
- Final Epoch Dev ROUGE-1: 36.43% (Epoch 10)

**ê´€ì°°**: Dev ROUGEê°€ #7-A(36.18%)ë³´ë‹¤ ë†’ìŒ!

#### Test ê²°ê³¼
- Test Score: **46.62ì **
- ë³€í™”: **-0.79** (from #7-A: 47.41)
- ì œì¶œ: 12/12 (ë§ˆì§€ë§‰ ì œì¶œ)

#### ì‹¤íŒ¨ ì›ì¸ ë¶„ì„

**ğŸ”´ ì£¼ìš” ì›ì¸: ì¦ê°• ì—†ëŠ” ì¹´í…Œê³ ë¦¬ì— ê°€ì¤‘ì¹˜ ì ìš©**

**ë¬¸ì œ ìƒí™©**:
```
ë…¸ë™/ê³ ìš© (135ê°œ, ì¦ê°• ì—†ìŒ)
â†’ ê°€ì¤‘ì¹˜ 3.70ë°° ì ìš©
â†’ 135 Ã— 3.70 = 500íšŒ ë°˜ë³µ ë…¸ì¶œ
â†’ ê°™ì€ ìƒ˜í”Œì„ ì—¬ëŸ¬ ë²ˆ í•™ìŠµ
â†’ ëª¨ë¸ì´ í•´ë‹¹ ìƒ˜í”Œì„ ì•”ê¸°
```

**ì¦ê°• vs ê°€ì¤‘ì¹˜ ë¹„êµ**:
| ë°©ë²• | ì„¤ëª… | íš¨ê³¼ |
|------|------|------|
| **ì¦ê°•** | ìƒˆë¡œìš´ ìƒ˜í”Œ ìƒì„± | ë‹¤ì–‘ì„± â†‘, ì¼ë°˜í™” â†‘ |
| **ê°€ì¤‘ì¹˜** | ê°™ì€ ìƒ˜í”Œ ë°˜ë³µ | ì•”ê¸° â†‘, ê³¼ì í•© â†‘ |

**Loss Gap ì¬í•´ì„**:
- **#7-A (ê°€ì¤‘ì¹˜ ì—†ìŒ)**: +0.50 (ì•ˆì •ì )
- **#7-F (ê°€ì¤‘ì¹˜ ìˆìŒ)**: +0.47 (í‘œë©´ì ìœ¼ë¡œëŠ” ì–‘ìˆ˜)

**í•˜ì§€ë§Œ**:
- Loss Gap ì–‘ìˆ˜ = í•­ìƒ ì¢‹ì€ ê²ƒì€ ì•„ë‹˜
- **Train ë¶„í¬ != Test ë¶„í¬**ì¸ ê²½ìš° ë¬¸ì œ ë°œìƒ
- ê°€ì¤‘ì¹˜ë¡œ Train ë¶„í¬ë¥¼ ì¸ìœ„ì ìœ¼ë¡œ ì™œê³¡
- ëª¨ë¸ì´ **ì™œê³¡ëœ ë¶„í¬**ì— ìµœì í™”
- Test set(ìì—° ë¶„í¬)ì—ì„œ ì‹¤íŒ¨

**Dev ROUGE ì—­ì„¤**:
- Dev ROUGE-1: 36.43% (#7-A: 36.18%)
- Test Score: 46.62 (#7-A: 47.41)
- **Dev ì ìˆ˜ëŠ” ë†’ì§€ë§Œ Test ì ìˆ˜ëŠ” ë‚®ìŒ**
- **Dev setë„ ê°€ì¤‘ì¹˜ ì˜í–¥ì„ ë°›ìŒ** (Devë„ ê°™ì€ ì¹´í…Œê³ ë¦¬)

#### ì¸ì‚¬ì´íŠ¸

**âœ… êµí›ˆ 1: Loss Gapë§Œìœ¼ë¡œ ë¶€ì¡±**
- Loss Gap ì–‘ìˆ˜ = í•„ìš”ì¡°ê±´ (Not ì¶©ë¶„ì¡°ê±´)
- **Train ë¶„í¬ ì™œê³¡** ì—¬ë¶€ë„ ì²´í¬ í•„ìš”

**âœ… êµí›ˆ 2: ì¦ê°• ì—†ëŠ” ê°€ì¤‘ì¹˜ëŠ” ìœ„í—˜**
```python
# âŒ ìœ„í—˜í•œ íŒ¨í„´
ì¦ê°• ì—†ìŒ + ê°€ì¤‘ì¹˜ ë†’ìŒ = ì•”ê¸°

# âœ… ì•ˆì „í•œ íŒ¨í„´
ì¦ê°• ìˆìŒ + ê°€ì¤‘ì¹˜ ì—†ìŒ = ì¼ë°˜í™”
```

**âœ… êµí›ˆ 3: Dev ROUGEë¥¼ ë§¹ì‹ í•˜ì§€ ë§ ê²ƒ**
- Devë„ í•™ìŠµ ë¶„í¬ì˜ ì˜í–¥ì„ ë°›ìŒ
- **Test ì œì¶œë§Œì´ ì§„ì‹¤**

**âœ… êµí›ˆ 4: WeightedRandomSamplerì˜ ì˜¬ë°”ë¥¸ ì‚¬ìš©**
```python
# âŒ ì˜ëª»ëœ ì‚¬ìš©
ì‘ì€ ì¹´í…Œê³ ë¦¬ (135ê°œ) Ã— 3.70ë°° = 500íšŒ
â†’ ê°™ì€ ìƒ˜í”Œ ë°˜ë³µ = ì•”ê¸°

# âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš© (í•´ì•¼ í–ˆë˜ ê²ƒ)
1. ëª¨ë“  ì¹´í…Œê³ ë¦¬ë¥¼ ë¨¼ì € 500ê°œë¡œ ì¦ê°•
2. ê·¸ ë‹¤ìŒ ê°€ì¤‘ì¹˜ ì—†ì´ í•™ìŠµ
   ë˜ëŠ”
3. ê°€ì¤‘ì¹˜ ì‚¬ìš© ì‹œ thresholdë¥¼ ë§¤ìš° ë‚®ê²Œ (1.5ë°° ì´í•˜)
```

#### ëŒ€ì•ˆ

**Option 1: ê· ë“± ì¦ê°• (ì¶”ì²œ â­â­â­)**
```python
ëª¨ë“  ì¹´í…Œê³ ë¦¬ë¥¼ 500ê°œë¡œ ì¦ê°•:
- ë…¸ë™/ê³ ìš©: 135 â†’ 500 (+365ê°œ)
- í™˜ê²½: 200 â†’ 500 (+300ê°œ)
- ê°ì • ì§€ì›: 130 â†’ 300 (+170ê°œ)
â†’ ê°€ì¤‘ì¹˜ ì—†ì´ ìì—° ë¶„í¬ë¡œ í•™ìŠµ
```

**ì˜ˆìƒ íš¨ê³¼**: +0.8~2.0ì 

**Option 2: ê°€ì¤‘ì¹˜ ìµœì†Œí™”**
```python
Max ê°€ì¤‘ì¹˜: 1.5ë°° (í˜„ì¬ 3.70ë°° ëŒ€ì‹ )
â†’ ì•”ê¸° ìœ„í—˜ ìµœì†Œí™”
```

**ì˜ˆìƒ íš¨ê³¼**: +0.3~0.8ì 

---

## í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ì¢…í•©

### 1. Loss Gapì´ ì§„ì‹¤ì„ ë§í•œë‹¤ (ëŒ€ë¶€ë¶„ì˜ ê²½ìš°)

**Loss Gap ì •ì˜**:
```
Loss Gap = Train Loss - Eval Loss
```

**í•´ì„**:
| Loss Gap | ì˜ë¯¸ | Train vs Eval | ì¼ë°˜í™” | ì˜ˆìƒ Test ì„±ëŠ¥ |
|----------|------|---------------|--------|----------------|
| **ì–‘ìˆ˜ (+)** | Train > Eval | Trainì´ ë” ì–´ë ¤ì›€ | âœ… ì¢‹ìŒ | âœ… ì¢‹ìŒ |
| **ìŒìˆ˜ (-)** | Train < Eval | Trainì´ ë” ì‰¬ì›€ | âŒ ê³¼ì í•© | âŒ ë‚˜ì¨ |

**ì‹¤í—˜ ì¦ê±°**:
```
#7-A: Loss Gap +0.50 â†’ Test 47.41 âœ…
#7-F: Loss Gap +0.47 â†’ Test 46.62 âŒ (ë¶„í¬ ì™œê³¡)
```

**âš ï¸ ì£¼ì˜ì‚¬í•­**:
- Loss Gap ì–‘ìˆ˜ = **í•„ìš”ì¡°ê±´**ì´ì§€ ì¶©ë¶„ì¡°ê±´ ì•„ë‹˜
- **Train ë¶„í¬ ì™œê³¡**ì´ ìˆìœ¼ë©´ ì–‘ìˆ˜ì—¬ë„ ì‹¤íŒ¨ ê°€ëŠ¥
- ê°€ì¤‘ì¹˜ ì‚¬ìš© ì‹œ Loss Gapë§Œìœ¼ë¡œ íŒë‹¨ ë¶ˆì¶©ë¶„

### 2. WeightedRandomSamplerì˜ í•¨ì •

**ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤**:
```python
# ì¦ê°• ì—†ëŠ” ì¹´í…Œê³ ë¦¬ì— ê°€ì¤‘ì¹˜ ì ìš©
ì¹´í…Œê³ ë¦¬: ë…¸ë™/ê³ ìš© (135ê°œ)
ê°€ì¤‘ì¹˜: 3.70ë°°
ê²°ê³¼: 135 Ã— 3.70 = 500íšŒ ë…¸ì¶œ

â†’ ê°™ì€ ìƒ˜í”Œì„ ì—¬ëŸ¬ ë²ˆ í•™ìŠµ
â†’ ëª¨ë¸ì´ ì•”ê¸° (Memorization)
â†’ Train ë¶„í¬ != Test ë¶„í¬
â†’ Test ì„±ëŠ¥ í•˜ë½
```

**ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•**:
```python
# Option 1: ì¦ê°• + ê°€ì¤‘ì¹˜ ì—†ìŒ (ì¶”ì²œ)
1. ëª¨ë“  ì¹´í…Œê³ ë¦¬ë¥¼ ê· ë“±í•˜ê²Œ ì¦ê°•
2. ê°€ì¤‘ì¹˜ ì—†ì´ ìì—° ë¶„í¬ë¡œ í•™ìŠµ

# Option 2: ê°€ì¤‘ì¹˜ ìµœì†Œí™”
1. ìµœëŒ€ ê°€ì¤‘ì¹˜ 1.5ë°° ì´í•˜ë¡œ ì œí•œ
2. Thresholdë¥¼ ë‚®ê²Œ ì„¤ì •
```

### 3. Dev ROUGEëŠ” ì°¸ê³ ìš©, Testë§Œ ë¯¿ì„ ê²ƒ

**ì‹¤í—˜ ì¦ê±°**:
| Exp | Dev ROUGE-1 | Test Score | ê´´ë¦¬ |
|-----|-------------|------------|------|
| #7-A | 36.18% | 47.41 | Dev < Test |
| #7-F | **36.43%** | 46.62 | Dev â†‘ but Test â†“ |

**êµí›ˆ**:
- âŒ Dev ROUGEê°€ ë†’ë‹¤ê³  Testë„ ë†’ì§€ ì•ŠìŒ
- âŒ Dev setë„ í•™ìŠµ ë¶„í¬ ì˜í–¥ì„ ë°›ìŒ
- âœ… **Test ì œì¶œë§Œì´ ìœ ì¼í•œ ì§„ì‹¤**
- âœ… DevëŠ” Loss Gapê³¼ í•¨ê»˜ ì°¸ê³ ë§Œ

### 4. ì¦ê°• ë°ì´í„°ì˜ ì˜¬ë°”ë¥¸ í™œìš©

**ì„±ê³µ íŒ¨í„´ (#7-A)**:
```
ì¦ê°• ë°ì´í„° 1,009ê°œ ì¶”ê°€ (+8.1%)
â†’ ê°€ì¤‘ì¹˜ ì—†ì´ ìì—° ë¶„í¬
â†’ Loss Gap +0.50 (ì•ˆì •ì )
â†’ Test 47.41 (ìœ ì§€)
â†’ ë‹¤ì–‘ì„± í™•ë³´ âœ…
```

**ì‹¤íŒ¨ íŒ¨í„´ (#7-F)**:
```
ì¦ê°• ì—†ëŠ” ì¹´í…Œê³ ë¦¬ì— ê°€ì¤‘ì¹˜ ì ìš©
â†’ ê°™ì€ ìƒ˜í”Œ ë°˜ë³µ í•™ìŠµ
â†’ ì•”ê¸° ë°œìƒ
â†’ Test 46.62 (í•˜ë½) âŒ
```

**ê²°ë¡ **:
- âœ… ì¦ê°• = ìƒˆë¡œìš´ ìƒ˜í”Œ = ë‹¤ì–‘ì„± = ì¼ë°˜í™”
- âŒ ê°€ì¤‘ì¹˜ = ë°˜ë³µ í•™ìŠµ = ì•”ê¸° = ê³¼ì í•©

### 5. Length Penaltyì˜ ì¤‘ìš”ì„±

**ì‹¤í—˜ ê²°ê³¼**:
| LP | Test Score | ë³€í™” |
|----|------------|------|
| 1.0 | 47.12 | Baseline |
| 0.5 | **47.47** | **+0.35** ğŸ† |
| 0.3 | 47.15 | +0.03 |
| 0.7 | 47.22 | +0.10 |

**ì¸ì‚¬ì´íŠ¸**:
- âœ… **LP=0.5ê°€ sweet spot**
- âœ… LP ë‚®ì¶”ë©´ ê¸´ ìš”ì•½ â†’ ROUGE ìƒìŠ¹
- âœ… LP=0.3ì€ ê³¼ë„ (ë„ˆë¬´ ê¸´ ìš”ì•½)
- âœ… ê°„ë‹¨í•œ ë³€ê²½ìœ¼ë¡œ í° íš¨ê³¼ (+0.35ì )

### 6. ì œì¶œ íšŸìˆ˜ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±

**ì œì¶œ ë‚´ì—­**:
```
1/12: Baseline (47.12)
2/12: LP=0.5 (47.47) ğŸ†
...
11/12: #7-A (47.41)
12/12: #7-F (46.62) âŒ
```

**êµí›ˆ**:
- âŒ ë§ˆì§€ë§‰ ì œì¶œ(12/12)ì´ ì‹¤íŒ¨ë¡œ ëë‚¨
- âœ… ì œì¶œ ì „ Loss Gap í™•ì¸ìœ¼ë¡œ ì‹¤íŒ¨ ì˜ˆì¸¡ ê°€ëŠ¥í–ˆìŒ
- âœ… ì‹ ì¤‘í•œ ì œì¶œ ì „ëµ í•„ìš” (12íšŒ ì œí•œ)

---

## ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

### Option 1: Learning Rate íŠœë‹ (ì¶”ì²œ â­â­â­)

**ì„¤ì •**:
```yaml
Learning Rate: 1e-5 â†’ 3e-5
Epochs: 20
Patience: 3
ë°ì´í„°: augmentation_final.csv (13,465ê°œ)
ìƒ˜í”Œë§: ê°€ì¤‘ì¹˜ ì—†ìŒ (ìì—° ë¶„í¬)
```

**ê·¼ê±°**:
- #7-Aë¡œ ì¦ê°• ë°ì´í„° ì•ˆì •ì„± í™•ë³´
- Loss Gap +0.50ìœ¼ë¡œ ê±´ê°•í•œ í•™ìŠµ í™•ì¸
- LR ë†’ì´ë©´ í•™ìŠµ ì†ë„ ê°œì„  ê°€ëŠ¥

**ì˜ˆìƒ íš¨ê³¼**: +0.5~1.5ì  â†’ **ëª©í‘œ: 48~49ì **

**ìœ„í—˜ë„**: âœ… Low (ì¦ê°• ì•ˆì •ì„± í™•ë³´ë¨)

---

### Option 2: ë” ê¸´ í•™ìŠµ (ì¶”ì²œ â­â­)

**ì„¤ì •**:
```yaml
Epochs: 20 â†’ 30
Patience: 3 â†’ 5
Learning Rate: 1e-5 (ìœ ì§€)
```

**ê·¼ê±°**:
- #7-Aì—ì„œ Epoch 11ì— Best ë‹¬ì„±
- ë” ê¸´ í•™ìŠµìœ¼ë¡œ ì¶”ê°€ ê°œì„  ì—¬ì§€
- Loss Gap ì–‘ìˆ˜ ìœ ì§€ ì¤‘

**ì˜ˆìƒ íš¨ê³¼**: +0.3~0.8ì 

**ìœ„í—˜ë„**: âœ… Low

---

### Option 3: ê· ë“± ì¦ê°• (ì¶”ì²œ â­â­â­, ì¥ê¸° ì „ëµ)

**ëª©í‘œ**: ëª¨ë“  ë„ë©”ì¸ì„ ê· ë“±í•˜ê²Œ ì¦ê°•

**ì¦ê°• ê³„íš**:
```python
ë„ë©”ì¸ë³„ ëª©í‘œ:
- ë…¸ë™/ê³ ìš©: 135 â†’ 500 (+365ê°œ)
- ê°ì • ì§€ì›: 130 â†’ 300 (+170ê°œ)
- í™˜ê²½: 200 â†’ 500 (+300ê°œ)
...

ì´ ì¦ê°•ëŸ‰: +1,500~2,000ê°œ
ìµœì¢… ë°ì´í„°: 14,000~14,500ê°œ
```

**ë°©ë²•**:
1. ChatGPT-4 ê¸°ë°˜ ëŒ€í™” ìƒì„±
2. ê° ë„ë©”ì¸ë³„ë¡œ ëª©í‘œ ê°œìˆ˜ê¹Œì§€ ì¦ê°•
3. í’ˆì§ˆ ê²€ì¦ (ìˆ˜ë™ ìƒ˜í”Œë§)

**í•™ìŠµ ì„¤ì •**:
```yaml
ìƒ˜í”Œë§: ê°€ì¤‘ì¹˜ ì—†ìŒ (ìì—° ë¶„í¬)
Learning Rate: 1e-5 ë˜ëŠ” 3e-5
Epochs: 20~30
```

**ì˜ˆìƒ íš¨ê³¼**: +0.8~2.0ì  â†’ **ëª©í‘œ: 48~50ì **

**ìœ„í—˜ë„**: âš ï¸ Medium (ë°ì´í„° í’ˆì§ˆ ì˜ì¡´)

---

### Option 4: Ensemble (ì„ íƒì )

**ë°©ë²•**:
- Best 3 checkpoints ì•™ìƒë¸”
  - Phase 1 (LP=0.5): 47.47
  - #7-A (ì¦ê°•): 47.41
  - ë‹¤ë¥¸ ì¢‹ì€ checkpoint

**ì˜ˆìƒ íš¨ê³¼**: +0.3~0.8ì 

**ë‹¨ì **: ì¶”ë¡  ì‹œê°„ 3ë°° ì¦ê°€

---

## ê¶Œì¥ ì‹¤í—˜ ìˆœì„œ

### ë‹¨ê¸° (ì œì¶œ ê°€ëŠ¥ ì‹œ)
1. **Learning Rate 3e-5** (Option 1) â†’ ì˜ˆìƒ: 48~49ì 
2. **Epochs 30** (Option 2) â†’ ì˜ˆìƒ: 48ì 
3. ë‘ ê°œ ì¡°í•© (LR 3e-5 + Epochs 30) â†’ ì˜ˆìƒ: 49~50ì 

### ì¤‘ê¸° (1-2ì£¼)
1. **ê· ë“± ì¦ê°•** (Option 3) â†’ ì˜ˆìƒ: 48~50ì 
2. ê· ë“± ì¦ê°• + LR íŠœë‹ â†’ ì˜ˆìƒ: 50~52ì 

### ì¥ê¸° (ì„ íƒì )
1. Ensemble â†’ ì˜ˆìƒ: +0.5~1ì 
2. ë” í° ëª¨ë¸ (mBART, KoT5) â†’ ì˜ˆìƒ: +1~3ì 

---

## ì‹¤í—˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì‹¤í—˜ ì‹œì‘ ì „**:
- [ ] Config íŒŒì¼ ì‘ì„± ë° ê²€ì¦
- [ ] ë°ì´í„° ê²½ë¡œ í™•ì¸
- [ ] ë””ìŠ¤í¬ ìš©ëŸ‰ í™•ì¸ (`du -sh /`)
- [ ] Wandb ë¡œê·¸ì¸ (ì„ íƒì )

**í•™ìŠµ ì¤‘**:
- [ ] Loss ì¶”ì´ ëª¨ë‹ˆí„°ë§ (Train vs Eval)
- [ ] Loss Gap ê³„ì‚° ë° ê¸°ë¡
- [ ] Dev ROUGE ì ìˆ˜ í™•ì¸ (ì°¸ê³ ìš©)
- [ ] Early Stopping ì‘ë™ ì—¬ë¶€

**í•™ìŠµ í›„**:
- [ ] Best Checkpoint í™•ì¸
- [ ] Loss Gap ë¶„ì„
- [ ] Dev ROUGEì™€ Loss Gap ë¹„êµ
- [ ] ì¶”ë¡  ì‹¤í–‰ (submission.csv ìƒì„±)
- [ ] CSV ê²€ì¦ (index ì»¬ëŸ¼, 499ê°œ ìƒ˜í”Œ)

**ì œì¶œ ì „ (ì¬ê°œ ì‹œ)**:
- [ ] Loss Gapì´ ì–‘ìˆ˜ì¸ê°€?
- [ ] Loss Gapì´ ì´ì „ ì‹¤í—˜ë³´ë‹¤ ë†’ì€ê°€?
- [ ] Train ë¶„í¬ ì™œê³¡ì´ ì—†ëŠ”ê°€? (ê°€ì¤‘ì¹˜ í™•ì¸)
- [ ] Dev ROUGEê°€ í•©ë¦¬ì ì¸ê°€? (ì°¸ê³ ìš©)
- [ ] CSV í˜•ì‹ ê²€ì¦ ì™„ë£Œ?

**ì œì¶œ í›„**:
- [ ] Test ì ìˆ˜ ê¸°ë¡
- [ ] ì‹¤í—˜ ë¡œê·¸ ì‘ì„±
- [ ] Config ë° ì²´í¬í¬ì¸íŠ¸ ë°±ì—…
- [ ] ë‹¤ìŒ ì‹¤í—˜ ê³„íš ìˆ˜ë¦½

---

## ì°¸ê³  íŒŒì¼

**ì‹¤í—˜ ë¡œê·¸**:
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/code/exp7a_train.log`
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/code/exp7c_train.log`
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/code/exp7f_train.log`

**Config íŒŒì¼**:
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/code/config.yaml`

**ë°ì´í„°**:
- `/Competition/NLP/data/augmentation_final.csv` (13,465ê°œ)

**ë¬¸ì„œ**:
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/README.md`
- `/Competition/NLP/naturallanguageprocessingcompetition-nlp-1/docs/RESTART_GUIDE.md`

---

## ë§ˆë¬´ë¦¬

### í˜„ì¬ ìƒíƒœ
- **ìµœê³  ì ìˆ˜**: 47.47ì  (Phase 1: LP=0.5)
- **ì•ˆì •ì  ì‹¤í—˜**: #7-A (47.41, Loss Gap +0.50)
- **ì œì¶œ íšŸìˆ˜**: 12/12 ì‚¬ìš© ì™„ë£Œ
- **ë‹¤ìŒ ì œì¶œ**: ë‚´ì¼ (ë¦¬ì…‹ í›„)

### í•µì‹¬ êµí›ˆ
1. **Loss Gapì´ ì§„ì‹¤** (ì–‘ìˆ˜ ìœ ì§€ í•„ìˆ˜)
2. **ê°€ì¤‘ì¹˜ ì‚¬ìš© ê¸ˆì§€** (ì•”ê¸° ìœ ë°œ)
3. **ì¦ê°• + ìì—° ë¶„í¬** (ì¼ë°˜í™” í™•ë³´)
4. **DevëŠ” ì°¸ê³ ìš©** (Testë§Œ ì‹ ë¢°)
5. **ë‹¨ìˆœí•¨ì˜ ê°€ì¹˜** (Baseline ì¡´ì¤‘)

### ë‹¤ìŒ ëª©í‘œ
- **ë‹¨ê¸°**: 48~49ì  (LR 3e-5)
- **ì¤‘ê¸°**: 50ì  ëŒíŒŒ (ê· ë“± ì¦ê°•)
- **ì¥ê¸°**: 52ì  ì´ìƒ (ê³ ê¸‰ ê¸°ë²•)

---

**ì‘ì„±ì¼**: 2025-10-15
**ì‘ì„±ì**: Claude Code
**ë²„ì „**: 1.0
**ìƒíƒœ**: ì œì¶œ íšŸìˆ˜ ì†Œì§„, ë‚´ì¼ ì¬ê°œ ê°€ëŠ¥